# React 里的 setState 到底是同步还是异步？<Badge text="2020/02/25"/>

## 解答

setState 会根据使用场景的不同，表现出同步和异步两种模式。

setState 只在合成事件以及钩子函数中是“异步”的，在原生事件以及定时器中是同步的。

但是需要注意的是 setState 的异步不是由异步函数实现的，它跟 `async`、`Promise` 等没啥关系。其执行过程其实都是同步的，那么为什么给我们一种它是“异步”的感觉呢？是因为在上面提到的场景里，它是进行批量更新的，也就是说我们的更新不会马上的更新到状态中，也就是说，我们在 `setState` 之后拿到的还是原来的值，这就给我们一种它是“异步”的感觉。

当然了，你也可以使用 `setState(state, callback)` 的方式，在回调函数中拿到更新后的状态。
