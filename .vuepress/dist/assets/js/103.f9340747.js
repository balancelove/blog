(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{315:function(t,a,s){"use strict";s.r(a);var e=s(38),r=Object(e.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("blockquote",[s("p",[t._v("在这节里，我会跟大家一起到 React 源码中查看我们用到的一些 API 是如何实现的，跟大家剧透一波，其实 React 库所做的功能并不复杂，因为这个库只是定义了一些结构，而真正核心的流程都在 React-dom 等平台相关库中，这样一种良好的拆分方式，可以让 React 更好地适应各个平台，下面我们就来一起看一看。")])]),t._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#react-children"}},[t._v("React.Children")])]),s("li",[s("a",{attrs:{href:"#react-createref"}},[t._v("React.createRef")]),s("ul",[s("li",[s("a",{attrs:{href:"#字符串"}},[t._v("字符串")])]),s("li",[s("a",{attrs:{href:"#回调函数"}},[t._v("回调函数")])]),s("li",[s("a",{attrs:{href:"#createref"}},[t._v("createRef")])])])])])]),s("p"),t._v(" "),s("p",[t._v("ps: 在这里，我并不会深入的去看所有的代码（react-dom 里的），只是理清 React 提供给我们 API，这对我们之后")]),t._v(" "),s("p",[t._v("下面我们就根据 "),s("code",[t._v("React.js")]),t._v(" 来一部分一部分看：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/react/react.png",alt:"React"}})]),t._v(" "),s("h2",{attrs:{id:"react-children"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-children","aria-hidden":"true"}},[t._v("#")]),t._v(" React.Children")]),t._v(" "),s("h2",{attrs:{id:"react-createref"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#react-createref","aria-hidden":"true"}},[t._v("#")]),t._v(" React.createRef")]),t._v(" "),s("p",[t._v("在 React 中，我们是通过数据的变化来让视图进行变化，但是在一些场景下我们需要直接更改子组件，而不去通过数据流的方式，React ref 就是这个场景的解决方案。")]),t._v(" "),s("p",[t._v("在查看源码之前，我们先补充一点知识，在 React 中，我们有 3 种方式来使用 ref。")]),t._v(" "),s("h3",{attrs:{id:"字符串"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#字符串","aria-hidden":"true"}},[t._v("#")]),t._v(" 字符串")]),t._v(" "),s("p",[t._v("这个方案在 16 之前是用的比较多的，但是这个方案已经不被官方推荐了，并且在未来的版本会移除。")]),t._v(" "),s("div",{staticClass:"language-jsx line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("myref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取 ref")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("myref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("h3",{attrs:{id:"回调函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#回调函数","aria-hidden":"true"}},[t._v("#")]),t._v(" 回调函数")]),t._v(" "),s("div",{staticClass:"language-jsx line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-jsx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token script language-javascript"}},[s("span",{pre:!0,attrs:{class:"token script-punctuation punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("el")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("myref "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" el"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取 ref")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("myref"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("h3",{attrs:{id:"createref"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#createref","aria-hidden":"true"}},[t._v("#")]),t._v(" createRef")]),t._v(" "),s("p",[t._v("我们可以看一下，其实你会大吃一惊，因为它的定义就几行代码。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/react/ref.png",alt:"create_ref"}})])])},[],!1,null,null,null);a.default=r.exports}}]);