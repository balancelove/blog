---
title: ssh-keygen 免密登录
date: 2020-07-07 20:00:00
permalink: /pages/59a714/
categories:
  - 小知识
  - 云服务器
tags:
  - ssh
  - 服务器
---

最近因为频繁到阿里云的机器上进行操作，每次都要输账号密码，非常的麻烦，所以也就选择去配置一下免密登录的问题，接下来我们进行详细的操作。

## 步骤

### 生成公钥和私钥

::: warning 跳过提示
如果已经生成过公私钥，可以跳过这一步。
:::

使用 `ssh-keygen` 生成秘钥，生成的秘钥存放在用户目录下。

```bash
ssh-keygen -t rsa -C "xxxx@email.com"

cd ~/.ssh
```

这时能够看到两个生成的文件：`id_rsa` 和 `id_rsa.put`，前者是私钥，后者是公钥。

### 发送公钥到目标机器

以我的配置为例：

```bash
# 执行的过程中，会需要输入 my_aliyun 机器的 root 账号的密码
ssh-copy-id root@my_aliyun
```

接下来，我去登录我的阿里云机器，去到 `~/.ssh` 目录下，可以看到一个 `authorized_keys` 文件，这个文件就是当前主机所包含的所有的公钥，可以看看你主机的公钥是否在其中，如果没有直接复制过来也是可以的。

### 登录主机

接下来，我们就可以直接 `ssh root@xxxx` 了，可以发现我们不需要密码就能够登录了。
